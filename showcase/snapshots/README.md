```{{
    config(
        target_schema='snapshots',          # Схема в БД где будет создана snapshot-таблица
        unique_key='order_id',              # Первичный ключ для идентификации записей (обязательный параметр)
        strategy='timestamp',               # Стратегия: отслеживание изменений по временной метке
        updated_at='updated_at'             # Имя колонки, содержащей метку времени изменений
    )
}}```


Использование current_timestamp означает, что каждый запуск dbt snapshot будет создавать новые версии всех записей, даже если данные не менялись. Для продакшена лучше:

1.Добавить реальное поле updated_at в источник данных

2.Или использовать стратегию check для отслеживания изменений только в конкретных полях

